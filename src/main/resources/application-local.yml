spring:
  config:
    import: optional:file:.env.local.properties

  ai:
    openai:
      api-key: ${GEMINI_API_KEY}
      chat:
        base-url: https://generativelanguage.googleapis.com
        completions-path: /v1beta/openai/chat/completions
        options:
          model: gemini-2.0-flash

  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB
      enabled: true
      
  datasource:
    url: ${SPRING_DATASOURCE_URL}
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}

  jpa:
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        format-sql: true
    database-platform: ${SPRING_JPA_DATABASE_PLATFORM}
  data:
    redis:
      host: localhost
      port: 6379
#      password: redis
      timeout: 5s
    cache:
      type: redis
      redis:
        time-to-live: 10m
        key-prefix: 'jh::'
        use-key-prefix: true
        cache-null-values: false

  mail:
    host: smtp.gmail.com
    port: 587
    username: ${SPRING_MAIL_USERNAME}
    password: ${SPRING_MAIL_PASSWORD}
    protocol: smtp
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true


security:
  cors:
    allowed-origins: [ "http://localhost:3000", "http://47.129.60.85:3000", "http://localhost:5173", "http://jobhuntly.io.vn", "https://jobhuntly.io.vn", "http://admin.jobhuntly.io.vn", "https://admin.jobhuntly.io.vn" ]
    allow-credentials: true
  jwt:
    secret: ${JWT_SECRET_KEY}
    access-ttl: PT60M
    refresh-ttl: P7D
    issuer: jobhuntly
  cookie:
    access-name: AT
    refresh-name: RT
    domain: ""         # hoặc xoá dòng này đi
    secure: false      # bỏ Secure khi HTTP
    same-site: Lax     # cùng origin thì Lax là đủ

google:
  client-id: ${GOOGLE_CLIENT_ID}

cloudinary:
  cloud-name: ${CLOUDINARY_CLOUD_NAME:${CLOUDINARY_NAME:}}
  api-key: ${CLOUDINARY_API_KEY:${CLOUDINARY_KEY:}}
  api-secret: ${CLOUDINARY_API_SECRET:${CLOUDINARY_SECRET:}}

frontend:
  host: ${FRONTEND_HOST}

backend:
  host: ${BACKEND_HOST:http://localhost:8080}
  prefix: ${BACKEND_PREFIX:api/v1}

# VNPay
vnpay:
  pay-url: https://sandbox.vnpayment.vn/paymentv2/vpcpay.html
  api-url: https://sandbox.vnpayment.vn/merchant_webapi/api/transaction
  return-url: http://localhost:8082/api/v1/payments/vnpay/return
  tmn-code: ${VNPAY_TMN_CODE}
  secret-key: ${VNPAY_SECRET_KEY}
  version: "2.1.0"
  expire-minutes: 15

logging:
  level:
    com.jobhuntly.backend.vnpay: DEBUG
    org.springframework.web: DEBUG
    org.springframework.web.servlet: DEBUG

    org.springframework.http.converter.json: DEBUG
    com.fasterxml.jackson.databind: DEBUG
    com.fasterxml.jackson.core: DEBUG

    org.springframework.web.client.RestTemplate: DEBUG
    org.apache.http: DEBUG

    reactor.netty.http.client: DEBUG
  host: ${BACKEND_HOST}
  prefix: ${BACKEND_PREFIX:/api/v1}

activation:
  ttl: PT5M
  resend-cooldown: PT2M

mail:
  imap:
    host: imap.gmail.com
    port: 993
    username: ${GMAIL_IMAP_USERNAME}
    password: ${GMAIL_IMAP_PASS}
    folder: INBOX
    poll-interval-ms: 30000
    mark-seen: true
    move-to-folder: Processed
    peek: true

  gmail:
    host: smtp.gmail.com
    port: 587
    username: ${GMAIL_IMAP_USERNAME}
    password: ${GMAIL_IMAP_PASS}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true

app:
  frontend:
    base-url: ${FRONTEND_HOST:http://localhost:3000}
    vip-path: /recruiter/companyVip

springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui
    operationsSorter: method
    tagsSorter: alpha
server:
  port: 8082
  error:
    include-message: always
    include-binding-errors: always
    include-stacktrace: always   # ⚠️ chỉ dùng DEV

ai:
  service:
    url: http://localhost:8000